(function(e){function t(t){for(var a,r,o=t[0],c=t[1],l=t[2],u=0,d=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},s={app:0},i=[];function r(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"66021555"}[e]+".js"}function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=s[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise(function(t,a){n=s[e]=[t,a]});t.push(n[2]=a);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=r(e);var l=new Error;i=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=s[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,n[1](l)}s[e]=void 0}};var u=setTimeout(function(){i({type:"timeout",target:c})},12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/f2e2019-week8-clouddrive/",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"04ec":function(e,t,n){},2700:function(e,t,n){e.exports=n.p+"img/jpg.5b0b4d21.svg"},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"full-wh",attrs:{id:"app"}},[n("router-view")],1)},i=[],r=(n("5c0b"),n("2877")),o={},c=Object(r["a"])(o,s,i,!1,null,null,null),l=c.exports,u=n("8c4f"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"position-relative wrap full-wh"},[e._m(0),a("div",{staticClass:"container-fluid a1-content"},[a("div",{staticClass:"row flex-rct"},[a("div",{staticClass:"col-12 col-md-3 a2-sidebar"},[a("nav",{staticClass:"collapse bd-links",attrs:{id:"bd-docs-nav"}},[a("ul",{staticClass:"nav flex-ccl"},[a("label",{staticClass:"btn btn-add flex-rlc"},[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),a("img",{attrs:{src:n("e0c9")}}),a("div",{staticClass:"btn-label"},[e._v("新增")])]),a("li",[a("div",{staticClass:"item flex-rlc",on:{click:function(t){return e.selectDriveType(0)}}},[a("img",{attrs:{src:n("834a")}}),a("div",{staticClass:"item-label"},[e._v(e._s(e.driveTypes[0]))])])]),a("li",[a("div",{staticClass:"item flex-rlc",attrs:{disabled:""},on:{click:function(t){return e.selectDriveType(1)}}},[a("img",{attrs:{src:n("e6c6")}}),a("div",{staticClass:"item-label"},[e._v(e._s(e.driveTypes[1]))])])]),a("li",[a("div",{staticClass:"item full-w flex-rlc",attrs:{disabled:""},on:{click:function(t){return e.selectDriveType(2)}}},[a("img",{attrs:{src:n("70e4")}}),a("div",{staticClass:"item-label"},[e._v(e._s(e.driveTypes[2]))])])]),a("li",[a("div",{staticClass:"item full-w flex-rlc",on:{click:function(t){return e.selectDriveType(3)}}},[a("img",{attrs:{src:n("a02d")}}),a("div",{staticClass:"item-label"},[e._v(e._s(e.driveTypes[3]))])])])]),a("hr"),a("ul",{staticClass:"nav flex-ccl"},[e._m(1),a("li",[a("div",{staticClass:"item flex-rlc no-select"},[a("div",{staticClass:"item-label no-icon item-desc"},[e._v("目前使用量："+e._s(e.usedGB))])])])])])]),a("div",{staticClass:"col-12 col-md-9 a2-list flex-ccc"},[a("div",{staticClass:"align-self-start list-title"},[e._v(e._s(e.driveTitle))]),a("table",{staticClass:"table table-hover"},[e._m(2),a("tbody",e._l(e.items,function(t,s){return a("tr",{key:s},[a("th",{staticClass:"flex-rlc",attrs:{scope:"row"}},[a("img",{directives:[{name:"show",rawName:"v-show",value:0===t.type,expression:"item.type === 0"}],attrs:{src:n("a8b3")}}),a("img",{directives:[{name:"show",rawName:"v-show",value:1===t.type,expression:"item.type === 1"}],attrs:{src:n("2700")}}),a("div",{staticClass:"ml-3"},[e._v(e._s(t.path))])]),a("td",{staticClass:"txt-c"},[e._v(e._s(t.updated))]),a("td",{staticClass:"txt-c"},[e._v(e._s(t.size/1e3)+"KB")]),e._m(3,!0)])}),0)])])])])])},d=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"navbar navbar-expand fixed-top header flex-rsbc"},[a("div",{staticClass:"header-title"},[e._v("Share Drive")]),a("button",{staticClass:"btn btn-link d-md-none collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#bd-docs-nav","aria-controls":"bd-docs-nav","aria-expanded":"false","aria-label":"Toggle docs navigation"}},[a("img",{attrs:{src:n("b16d")}})])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",[a("div",{staticClass:"item flex-rlc no-select"},[a("img",{attrs:{src:n("b8ba")}}),a("div",{staticClass:"item-label"},[e._v("儲存空間")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[e._v("名稱")]),n("th",{attrs:{scope:"col"}},[e._v("最後修改時間")]),n("th",{attrs:{scope:"col"}},[e._v("檔案大小")]),n("th",{attrs:{scope:"col"}},[e._v("功能")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td",{staticClass:"txt-c"},[n("button",{staticClass:"btn flex-ccc"},[e._v("...")])])}],p=(n("8e6e"),n("456d"),n("ac6a"),n("bd86")),v=n("2f62"),h=(n("7f7f"),{apiKey:"".concat("AIzaSyBc-KCRkgGVwu4zXpZbtKxYIx_OjiO2obw"),authDomain:"".concat("f2e2019-week8-clouddrive",".firebaseapp.com"),databaseURL:"https://".concat("f2e2019-week8-clouddrive",".firebaseio.com"),projectId:"".concat("f2e2019-week8-clouddrive"),storageBucket:"".concat("f2e2019-week8-clouddrive",".appspot.com"),messagingSenderId:"".concat("126412420027"),appId:"".concat("1:126412420027:web:1f14af476baf99d4")});window.firebase.initializeApp(h);var b=window.firebase.database(),m=b.ref(".info/connected");m.on("value",function(e){e.val()?console.log("firebase connected"):console.log("firebase not connected")});var g,y=window.firebase.auth(),_=window.firebase.storage(),w="SIGNED_IN",x="UPDATE_LIST",C="UPDATE_FILE_INFO",O="UPDATE_ERR",j={updateErr:function(e,t){var n=e.commit;n(O,t)},signedIn:function(e,t){var n=e.commit;n(w,t)},updateStorageList:function(e,t){var n=e.commit;n(x,t)},updateFileInfo:function(e,t){var n=e.commit;console.log(t),n(C,t)}},T=j,E={folders:function(e){return e.folders},files:function(e){return e.files},infos:function(e){return e.infos}},k=E,P=(g={},Object(p["a"])(g,w,function(e,t){t&&(e.isAnonymous=t.isAnonymous,e.uid=t.uid)}),Object(p["a"])(g,x,function(e,t){t&&(e.folders=t.folders,e.files=t.files)}),Object(p["a"])(g,C,function(e,t){t&&(e.infos[t.path]=t.metadata)}),Object(p["a"])(g,O,function(e,t){t&&(e.lastErrorCode=t.errCode,e.lastErrorMessage=t.errMessage),e.isLoading=!1}),g),S={isAnonymous:null,uid:null,folders:null,files:null,infos:{},lastErrorCode:null,lastErrorMessage:null,isLoading:!1};a["a"].use(v["a"]);var D=new v["a"].Store({actions:T,getters:k,mutations:P,state:S,strict:!1}),I=function(){var e=_.ref();e.listAll().then(function(e){var t={folders:e.prefixes,files:e.items};D.dispatch("updateStorageList",t),t.files.forEach(function(e){var t=_.ref(e.location.path);t.getMetadata().then(function(t){var n={};n.path=e.location.path,n.metadata=t,D.dispatch("updateFileInfo",n)}).catch(function(e){console.log(e)})})}).catch(function(e){console.log("storage error"),console.log(e)})},A=function(){console.log("firebase init"),y.signInAnonymously().catch(function(e){console.log(e);var t={errCode:e.code,errMessage:e.message};D.dispatch("updateErr",t)}),y.onAuthStateChanged(function(e){e?(D.dispatch("signedIn",e),console.log("user is signed in. (uid: ".concat(e.uid,")")),I()):console.log("user is signed out.")})},M=function(e){console.log("upload file: ".concat(e.name));var t=e.name,n=_.ref(t),a=n.put(e);a.on("state_changed",function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log("progress: ".concat(t,"%"))},function(e){alert(e)},function(){alert("上傳成功"),I()})};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach(function(t){Object(p["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var L={name:"ShareDriveMain",data:function(){return{storageUsed:19.4,file:null,driveTypeIdx:0,driveTypes:["分享雲端空間","近期存取","已加星號","垃圾桶"]}},mounted:function(){A(this)},methods:{handleFileUpload:function(){this.$refs.file.files.length&&(this.file=this.$refs.file.files[0],this.file.size<=1048576?M(this.file):alert("The file size must be less than 1MB."))},selectDriveType:function(e){this.driveTypeIdx=e}},computed:z({usedGB:function(){return"".concat(this.storageUsed," GB")},driveTitle:function(){return this.driveTypes[this.driveTypeIdx]},items:function(){var e=this,t=[];return this.folders&&this.folders.forEach(function(e){var n={type:0};n.path=e.location.path,n.updated="-",n.size="-",t.push(n)}),this.files&&this.files.forEach(function(n){var a={type:1};a.path=n.location.path,a.updated=e.infos[a.path]?new Date(e.infos[a.path].updated).toDateString():"-",a.size=e.infos[a.path]?e.infos[a.path].size:"-",t.push(a)}),t}},Object(v["b"])(["folders","files","infos"]))},B=L,U=(n("8750"),Object(r["a"])(B,f,d,!1,null,"801c4392",null)),F=U.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},N=[],K={name:"TestPage",data:function(){return{}},mounted:function(){A(this)}},R=K,J=Object(r["a"])(R,G,N,!1,null,null,null),q=J.exports;a["a"].use(u["a"]);var V=new u["a"]({mode:"history",base:"/f2e2019-week8-clouddrive/",routes:[{path:"/",name:"home",component:F},{path:"/test",name:"test",component:q},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"a1d1"))}}]});n("c228");a["a"].config.productionTip=!1,new a["a"]({router:V,store:D,render:function(e){return e(l)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var a=n("e332"),s=n.n(a);s.a},"70e4":function(e,t,n){e.exports=n.p+"img/icon_stars.aa5ad155.svg"},"834a":function(e,t,n){e.exports=n.p+"img/icon_shared.da14d1f1.svg"},8750:function(e,t,n){"use strict";var a=n("04ec"),s=n.n(a);s.a},a02d:function(e,t,n){e.exports=n.p+"img/icon_trash.a5eb6bcc.svg"},a8b3:function(e,t,n){e.exports=n.p+"img/icon_folder.b388a6e5.svg"},b16d:function(e,t,n){e.exports=n.p+"img/btn_menu.4c4d7c89.svg"},b8ba:function(e,t,n){e.exports=n.p+"img/icon_storage_space.19251561.svg"},c228:function(e,t,n){},e0c9:function(e,t,n){e.exports=n.p+"img/icon_add.304afbf4.svg"},e332:function(e,t,n){},e6c6:function(e,t,n){e.exports=n.p+"img/icon_recently.2701f4f2.svg"}});
//# sourceMappingURL=app.cf2b802c.js.map